"""
æ¼”ç¤ºæµ‹è¯•ç”¨ä¾‹
ç”¨äºå±•ç¤ºWeb GUIç³»ç»Ÿçš„åŠŸèƒ½
"""

# æ¼”ç¤ºæµ‹è¯•ç”¨ä¾‹æ•°æ®
DEMO_CASES = [
    {
        "name": "ç™¾åº¦æœç´¢åŠŸèƒ½æµ‹è¯•",
        "description": "æµ‹è¯•ç™¾åº¦æœç´¢çš„åŸºæœ¬åŠŸèƒ½ï¼ŒåŒ…æ‹¬è¾“å…¥ã€æœç´¢å’Œç»“æœéªŒè¯",
        "target_url": "https://www.baidu.com",
        "natural_language_input": """1. åœ¨æœç´¢æ¡†ä¸­è¾“å…¥"äººå·¥æ™ºèƒ½"
2. ç‚¹å‡»æœç´¢æŒ‰é’®
3. ç­‰å¾…æœç´¢ç»“æœé¡µé¢åŠ è½½å®Œæˆ
4. éªŒè¯é¡µé¢æ˜¾ç¤ºäº†ç›¸å…³çš„æœç´¢ç»“æœ
5. æå–å‰5ä¸ªæœç´¢ç»“æœçš„æ ‡é¢˜
6. éªŒè¯æœç´¢ç»“æœæ•°é‡å¤§äº0"""
    },
    {
        "name": "ç”µå•†ç½‘ç«™å•†å“æœç´¢",
        "description": "æ¨¡æ‹Ÿåœ¨ç”µå•†ç½‘ç«™æœç´¢å•†å“çš„å®Œæ•´æµç¨‹",
        "target_url": "https://www.jd.com",
        "natural_language_input": """1. åœ¨æœç´¢æ¡†è¾“å…¥"iPhone 15"
2. ç‚¹å‡»æœç´¢æŒ‰é’®
3. ç­‰å¾…å•†å“åˆ—è¡¨åŠ è½½
4. éªŒè¯é¡µé¢æ˜¾ç¤ºäº†iPhoneç›¸å…³å•†å“
5. ç‚¹å‡»ç¬¬ä¸€ä¸ªå•†å“
6. ç­‰å¾…å•†å“è¯¦æƒ…é¡µåŠ è½½
7. éªŒè¯å•†å“è¯¦æƒ…é¡µæ˜¾ç¤ºäº†ä»·æ ¼ä¿¡æ¯
8. æå–å•†å“åç§°å’Œä»·æ ¼"""
    },
    {
        "name": "æ–°é—»ç½‘ç«™å†…å®¹æµè§ˆ",
        "description": "æµ‹è¯•æ–°é—»ç½‘ç«™çš„å†…å®¹æµè§ˆå’Œä¿¡æ¯æå–åŠŸèƒ½",
        "target_url": "https://news.sina.com.cn",
        "natural_language_input": """1. ç­‰å¾…é¦–é¡µåŠ è½½å®Œæˆ
2. éªŒè¯é¡µé¢æ˜¾ç¤ºäº†æ–°é—»æ ‡é¢˜
3. æå–é¦–é¡µå‰10æ¡æ–°é—»æ ‡é¢˜
4. ç‚¹å‡»ç¬¬ä¸€æ¡æ–°é—»
5. ç­‰å¾…æ–°é—»è¯¦æƒ…é¡µåŠ è½½
6. éªŒè¯æ–°é—»å†…å®¹å·²æ˜¾ç¤º
7. æå–æ–°é—»å‘å¸ƒæ—¶é—´å’Œä½œè€…ä¿¡æ¯"""
    },
    {
        "name": "ç¤¾äº¤åª’ä½“ç™»å½•æµç¨‹",
        "description": "æ¨¡æ‹Ÿç¤¾äº¤åª’ä½“å¹³å°çš„ç™»å½•æµç¨‹æµ‹è¯•",
        "target_url": "https://weibo.com",
        "natural_language_input": """1. ç‚¹å‡»ç™»å½•æŒ‰é’®
2. åœ¨ç”¨æˆ·åæ¡†è¾“å…¥æµ‹è¯•è´¦å·
3. åœ¨å¯†ç æ¡†è¾“å…¥æµ‹è¯•å¯†ç 
4. ç‚¹å‡»ç™»å½•æäº¤æŒ‰é’®
5. ç­‰å¾…é¡µé¢å“åº”
6. éªŒè¯æ˜¯å¦æ˜¾ç¤ºéªŒè¯ç 
7. å¦‚æœæœ‰éªŒè¯ç ï¼Œæå–éªŒè¯ç å›¾ç‰‡
8. éªŒè¯ç™»å½•çŠ¶æ€æˆ–é”™è¯¯æç¤º"""
    },
    {
        "name": "åœ¨çº¿è¡¨å•å¡«å†™æµ‹è¯•",
        "description": "æµ‹è¯•åœ¨çº¿è¡¨å•çš„å¡«å†™å’Œæäº¤åŠŸèƒ½",
        "target_url": "https://www.wjx.cn",
        "natural_language_input": """1. æŸ¥æ‰¾é—®å·è°ƒæŸ¥è¡¨å•
2. å¡«å†™å§“åå­—æ®µä¸º"æµ‹è¯•ç”¨æˆ·"
3. é€‰æ‹©æ€§åˆ«é€‰é¡¹
4. å¡«å†™å¹´é¾„ä¸º"25"
5. é€‰æ‹©èŒä¸šé€‰é¡¹
6. å¡«å†™è”ç³»æ–¹å¼
7. å¡«å†™æ„è§å»ºè®®æ–‡æœ¬æ¡†
8. ç‚¹å‡»æäº¤æŒ‰é’®
9. éªŒè¯æäº¤æˆåŠŸæç¤º"""
    },
    {
        "name": "è§†é¢‘ç½‘ç«™æœç´¢æ’­æ”¾",
        "description": "æµ‹è¯•è§†é¢‘ç½‘ç«™çš„æœç´¢å’Œæ’­æ”¾åŠŸèƒ½",
        "target_url": "https://www.bilibili.com",
        "natural_language_input": """1. åœ¨æœç´¢æ¡†è¾“å…¥"ç¼–ç¨‹æ•™ç¨‹"
2. ç‚¹å‡»æœç´¢æŒ‰é’®
3. ç­‰å¾…æœç´¢ç»“æœåŠ è½½
4. éªŒè¯æ˜¾ç¤ºäº†ç›¸å…³è§†é¢‘
5. æå–å‰5ä¸ªè§†é¢‘çš„æ ‡é¢˜å’Œæ’­æ”¾é‡
6. ç‚¹å‡»ç¬¬ä¸€ä¸ªè§†é¢‘
7. ç­‰å¾…è§†é¢‘é¡µé¢åŠ è½½
8. éªŒè¯è§†é¢‘æ’­æ”¾å™¨å·²æ˜¾ç¤º
9. æå–è§†é¢‘æ—¶é•¿å’ŒUPä¸»ä¿¡æ¯"""
    },
    {
        "name": "å¤©æ°”æŸ¥è¯¢åŠŸèƒ½æµ‹è¯•",
        "description": "æµ‹è¯•å¤©æ°”ç½‘ç«™çš„åŸå¸‚æŸ¥è¯¢å’Œä¿¡æ¯æ˜¾ç¤º",
        "target_url": "https://weather.com.cn",
        "natural_language_input": """1. åœ¨åŸå¸‚æœç´¢æ¡†è¾“å…¥"åŒ—äº¬"
2. ç‚¹å‡»æœç´¢æˆ–é€‰æ‹©åŒ—äº¬
3. ç­‰å¾…å¤©æ°”ä¿¡æ¯åŠ è½½
4. éªŒè¯æ˜¾ç¤ºäº†å½“å‰å¤©æ°”
5. æå–å½“å‰æ¸©åº¦å’Œå¤©æ°”çŠ¶å†µ
6. æå–æœªæ¥7å¤©å¤©æ°”é¢„æŠ¥
7. éªŒè¯ç©ºæ°”è´¨é‡ä¿¡æ¯å·²æ˜¾ç¤º
8. æå–ç©ºæ°”è´¨é‡æŒ‡æ•°"""
    },
    {
        "name": "åœ¨çº¿ç¿»è¯‘åŠŸèƒ½æµ‹è¯•",
        "description": "æµ‹è¯•åœ¨çº¿ç¿»è¯‘å·¥å…·çš„ç¿»è¯‘åŠŸèƒ½",
        "target_url": "https://fanyi.baidu.com",
        "natural_language_input": """1. åœ¨æºè¯­è¨€æ–‡æœ¬æ¡†è¾“å…¥"Hello World"
2. é€‰æ‹©æºè¯­è¨€ä¸ºè‹±è¯­
3. é€‰æ‹©ç›®æ ‡è¯­è¨€ä¸ºä¸­æ–‡
4. ç‚¹å‡»ç¿»è¯‘æŒ‰é’®æˆ–ç­‰å¾…è‡ªåŠ¨ç¿»è¯‘
5. éªŒè¯ç¿»è¯‘ç»“æœå·²æ˜¾ç¤º
6. æå–ç¿»è¯‘ç»“æœæ–‡æœ¬
7. éªŒè¯ç¿»è¯‘ç»“æœåŒ…å«"ä¸–ç•Œ"
8. æµ‹è¯•è¯­éŸ³æ’­æ”¾åŠŸèƒ½"""
    }
]

def create_demo_cases():
    """åˆ›å»ºæ¼”ç¤ºæµ‹è¯•ç”¨ä¾‹çš„å‡½æ•°"""
    import sys
    import os
    from pathlib import Path
    
    # æ·»åŠ é¡¹ç›®è·¯å¾„
    project_root = Path(__file__).parent.parent
    sys.path.insert(0, str(project_root))
    
    try:
        from web_gui.app import app, db, TestCase
        
        with app.app_context():
            # æ£€æŸ¥æ˜¯å¦å·²æœ‰æ¼”ç¤ºç”¨ä¾‹
            existing_count = TestCase.query.count()
            if existing_count > 0:
                print(f"æ•°æ®åº“ä¸­å·²æœ‰ {existing_count} ä¸ªæµ‹è¯•ç”¨ä¾‹")
                response = input("æ˜¯å¦è¦æ·»åŠ æ¼”ç¤ºç”¨ä¾‹? (y/N): ")
                if response.lower() != 'y':
                    return
            
            # åˆ›å»ºæ¼”ç¤ºç”¨ä¾‹
            created_count = 0
            for demo_case in DEMO_CASES:
                # æ£€æŸ¥æ˜¯å¦å·²å­˜åœ¨åŒåç”¨ä¾‹
                existing = TestCase.query.filter_by(name=demo_case["name"]).first()
                if existing:
                    print(f"è·³è¿‡å·²å­˜åœ¨çš„ç”¨ä¾‹: {demo_case['name']}")
                    continue
                
                # ä½¿ç”¨AIè§£æå™¨ç”Ÿæˆæ­¥éª¤
                from web_gui.services.ai_enhanced_parser import parse_natural_language
                steps = parse_natural_language(
                    demo_case["natural_language_input"],
                    demo_case["target_url"]
                )
                
                # åˆ›å»ºæµ‹è¯•ç”¨ä¾‹
                test_case = TestCase(
                    name=demo_case["name"],
                    description=demo_case["description"],
                    natural_language_input=demo_case["natural_language_input"],
                    generated_steps=json.dumps(steps, ensure_ascii=False, indent=2),
                    target_url=demo_case["target_url"],
                    status='ready'
                )
                
                db.session.add(test_case)
                created_count += 1
                print(f"âœ… åˆ›å»ºæ¼”ç¤ºç”¨ä¾‹: {demo_case['name']}")
            
            db.session.commit()
            print(f"\nğŸ‰ æˆåŠŸåˆ›å»º {created_count} ä¸ªæ¼”ç¤ºæµ‹è¯•ç”¨ä¾‹!")
            print("ç°åœ¨å¯ä»¥å¯åŠ¨Web GUIæŸ¥çœ‹å’Œæ‰§è¡Œè¿™äº›ç”¨ä¾‹")
            
    except Exception as e:
        print(f"âŒ åˆ›å»ºæ¼”ç¤ºç”¨ä¾‹å¤±è´¥: {e}")

if __name__ == "__main__":
    import json
    create_demo_cases()
