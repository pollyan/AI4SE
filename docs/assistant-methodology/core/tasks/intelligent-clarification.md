<!-- Powered by BMAD™ Core -->

# 智能需求澄清任务

## ⚠️ CRITICAL EXECUTION NOTICE ⚠️

**THIS IS AN EXECUTABLE WORKFLOW - NOT REFERENCE MATERIAL**

当此任务被调用时：

1. **禁用所有效率优化** - 需求澄清必须进行完整的用户交互，不能为了效率跳过步骤
2. **强制逐步执行** - 每个澄清阶段必须顺序处理并等待用户反馈后才能继续
3. **澄清是必需的** - 当遇到模糊、不完整或矛盾的需求时，必须使用1-9格式等待用户响应
4. **不允许捷径** - 不能在没有充分澄清的情况下假设或推测用户需求
5. **完整性验证** - 必须确保所有关键维度都被充分澄清后才能结束

**VIOLATION INDICATOR:** 如果您在没有用户交互的情况下完成需求澄清，您已违反此工作流程。

## 任务目的

通过系统化的智能对话澄清，将用户的模糊初始需求转化为清晰、完整、可执行的产品需求理解，为后续PRD生成奠定坚实基础。

## 澄清执行流程

### 阶段1：需求理解与上下文建立

**执行指令：**

1. **倾听并复述**
   - 仔细分析用户的初始需求描述
   - 用自己的语言重新阐述理解的需求
   - 明确指出理解中的关键点和可能的疑问
   - 请求用户确认理解的正确性

2. **上下文探索**
   - 了解需求产生的背景和触发因素
   - 探索当前状况、痛点和挑战
   - 理解业务环境和组织背景
   - 识别相关利益相关方

3. **问题本质挖掘**
   - 通过"为什么"系列追问，层层深入
   - 找到需求的根本驱动力和真实动机
   - 区分表面需求和本质需求
   - 确保解决正确的问题

**阶段完成标准：**
- 用户明确确认问题理解正确
- 业务上下文信息充分清晰
- 根本动机和驱动力明确
- 为多维度澄清建立了坚实基础

### 阶段2：多维度深度澄清

**用户维度澄清** (elicit: true):

1. **信息收集和分析**
   - 基于目前掌握的信息分析目标用户特征
   - 识别用户相关的关键信息缺失点
   - 从data/clarification-methods.md中选择最适合的澄清方法

2. **内容呈现和推理**
   - 呈现当前对用户维度的理解和分析
   - 详细说明分析的推理过程和依据
   - 指出仍需澄清的关键问题

3. **强制停止点** - **MANDATORY 1-9 OPTIONS FORMAT**
   ```
   **用户维度澄清结果：**
   [呈现当前用户分析结果]
   
   **推理过程：**
   [详细解释分析依据和逻辑]
   
   === 深度澄清选项 ===
   选择1-9或直接提供反馈：
   
   1. 继续业务维度澄清
   2. [从clarification-methods.md选择方法1]
   3. [从clarification-methods.md选择方法2]
   4. [从clarification-methods.md选择方法3]
   5. [从clarification-methods.md选择方法4]
   6. [从clarification-methods.md选择方法5]
   7. [从clarification-methods.md选择方法6]
   8. [从clarification-methods.md选择方法7]
   9. [从clarification-methods.md选择方法8]
   
   选择 1-9 或直接提供反馈：
   ```

4. **等待用户响应** - 必须停止并等待用户选择或反馈，不得继续

**业务维度澄清** (elicit: true):
- 遵循相同的1-9选项格式
- 重点澄清业务目标、价值预期、成功指标、预算时间约束等
- 必须等待用户响应才能继续

**技术维度澄清** (elicit: true):
- 遵循相同的1-9选项格式  
- 重点澄清技术环境、集成要求、性能安全标准、可扩展性需求等
- 必须等待用户响应才能继续

### 阶段3：边界和优先级澄清

**范围界定澄清** (elicit: true):
- 明确MVP功能边界的详细定义
- 确定分期交付策略和里程碑
- 明确排除的功能点和原因
- 评估变更影响范围和风险

**优先级排序澄清** (elicit: true):
- 基于用户价值对功能进行排序
- 考虑技术依赖关系和实现顺序
- 平衡快速验证需求和长期价值实现
- 确定关键路径和风险点

## 澄清方法调用机制

当用户选择2-9选项时：

1. **方法定位**
   - 从dependencies中的data/clarification-methods.md加载对应方法
   - 确保方法与当前澄清阶段匹配

2. **方法执行**
   - 严格按照所选方法的指导原则执行
   - 生成针对当前需求情况的具体问题和引导语
   - 收集用户的详细反馈和补充信息

3. **信息整合**
   - 将新获得的信息整合到需求理解模型中
   - 更新对需求各个维度的认知
   - 识别新出现的澄清需求

4. **循环机制**
   - 再次提供相同的1-9选项格式
   - 继续深度澄清直到用户选择继续下一阶段

## 完整性验证检查

在每个阶段结束前，必须验证：

**信息完整性检查：**
- [ ] 关键信息点是否都已收集？
- [ ] 模糊表述是否都已具体化？
- [ ] 矛盾信息是否都已解决？

**逻辑一致性检查：**
- [ ] 不同维度的信息是否相互支撑？
- [ ] 需求之间是否存在逻辑冲突？
- [ ] 约束条件是否realistic？

**可操作性检查：**
- [ ] 需求是否足够具体以支撑后续PRD生成？
- [ ] 验收标准是否可明确定义？
- [ ] 实施路径是否清晰？

## 任务完成标准

只有在满足以下所有条件时才能完成澄清任务：

1. **全维度覆盖**：用户、业务、技术、范围、优先级等关键维度都已充分澄清
2. **信息质量达标**：所有关键信息都具体、明确、可验证
3. **用户确认**：用户明确表达对澄清结果的满意和确认
4. **为PRD就绪**：澄清的信息足以支撑生成高质量的PRD文档
5. **风险识别**：潜在风险和挑战已被识别和评估

**CRITICAL:** 如果以上任何条件未满足，必须继续澄清过程，不得草率结束。
