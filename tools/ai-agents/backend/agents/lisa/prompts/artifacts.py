"""
Lisa 工作流产出物模板定义

包含各阶段产出物的详细结构、格式要求和可视化示例。
"""

# ═══════════════════════════════════════════════════════════════════════════════
# 1. 需求澄清阶段 (Clarify) - 需求分析文档
# ═══════════════════════════════════════════════════════════════════════════════

ARTIFACT_CLARIFY_REQUIREMENTS = """
# 需求分析文档

## 1. 需求全景图
> 使用 ```mermaid mindmap``` 绘制核心需求、功能要点和关键约束

## 2. 功能详细规格

| ID | 功能名称 | 描述 | 验收标准 | 优先级 |
|----|----------|------|----------|--------|
| F1 | [功能名] | [描述] | [验收标准列表] | P0/P1/P2 |

## 3. 业务流程图
> 使用 ```mermaid graph TD``` 绘制核心业务流程

## 4. 非功能需求 (NFR)
- **性能**: [QPS/响应时间等]
- **安全**: [加密/认证等]
- **兼容性**: [浏览器/设备等]

## 5. 已确认信息
> 根据用户澄清逐步填充，格式：
> - ✅ 议题 X - 问题名：确认的答案

---
> 可根据实际情况添加其他章节：如数据模型、接口规范、状态机等

"""

ARTIFACT_REQ_REVIEW_RECORD = """
# 需求评审记录

## 1. 评审概况
- **需求名称**: [名称]
- **评审阶段**: 需求澄清
- **状态**: 进行中

## 2. 核心业务理解
> 基于对话记录当前对业务的理解
- **业务目标**: [待补充]
- **关键流程**: [待补充]

## 3. 待确认问题 (Issues)
| ID | 问题描述 | 状态 | 结论 |
|----|----------|------|------|
| Q1 | [问题]   | 待确认 | - |

## 4. 评审结论
> 暂无
"""


# ═══════════════════════════════════════════════════════════════════════════════
# 2. 策略制定阶段 (Strategy) - 测试策略蓝图
# ═══════════════════════════════════════════════════════════════════════════════

ARTIFACT_STRATEGY_BLUEPRINT = """
# 测试策略蓝图

## 1. 风险分析 (FMEA)

```mermaid
quadrantChart
    title 风险矩阵
    x-axis 低发生的可能性 --> 高发生的可能性
    y-axis 低影响程度 --> 高影响程度
    quadrant-1 重点监控
    quadrant-2 核心测试
    quadrant-3 快速验证
    quadrant-4 常规回归
    "风险点A": [0.8, 0.9]
    "风险点B": [0.3, 0.8]
    "风险点C": [0.4, 0.2]
```

| 风险项 | 潜在失效模式 | 影响分析 | 缓解策略 |
|--------|--------------|----------|----------|
| R1     | [模式]       | [影响]   | [策略]   |

## 2. 测试分层策略

```mermaid
block-beta
columns 1
  block:e2e
    E2E_Tests["端到端测试 (UI/API) - 10%"]
  end
  block:integration
    Integration_Tests["集成测试 (Service/DB) - 30%"]
  end
  block:unit
    Unit_Tests["单元测试 (Function/Class) - 60%"]
  end
  style E2E_Tests fill:#f9f,stroke:#333,stroke-width:2px
  style Integration_Tests fill:#bbf,stroke:#333,stroke-width:2px
  style Unit_Tests fill:#cfc,stroke:#333,stroke-width:2px
```

## 3. 测试类型与工具
- **功能测试**: [工具/方法]
- **性能测试**: [工具/指标]
- **安全测试**: [工具/扫描]

## 4. 资源与环境规划
- **测试环境**: [Dev / Staging / Prod]
- **数据准备**: [造数脚本 / 生产脱敏]
- **人力投入**: [估算]
"""


# ═══════════════════════════════════════════════════════════════════════════════
# 3. 用例编写阶段 (Cases) - 测试用例集
# ═══════════════════════════════════════════════════════════════════════════════

ARTIFACT_CASES_SET = """
# 测试用例集

## 1. 测试用例架构
```mermaid
graph LR
    Root[测试用例集] --> Func[功能测试]
    Root --> NonFunc[非功能测试]
    
    Func --> Normal[正常场景]
    Func --> Abnormal[异常场景]
    
    Normal --> C1[用例1]
    Abnormal --> C2[用例2]
```

## 2. 核心场景列表

| ID | 场景描述 | 前置条件 | 关键步骤 | 预期结果 | 类型 |
|----|----------|----------|----------|----------|------|
| TC01 | [场景] | [条件] | 1. [步1]<br>2. [步2] | [结果] | 冒烟 |
| TC02 | ... | ... | ... | ... | 回归 |

## 3. 详细用例设计

### TC-001: [用例标题]
- **优先级**: P0
- **测试技术**: [如：边界值]
- **测试数据**:
  ```json
  {
    "key": "value"
  }
  ```
- **执行步骤**:
  1. 步骤描述 1
  2. 步骤描述 2
- **断言点**:
  - [ ] 检查点 A
  - [ ] 检查点 B

### TC-002: ...

## 4. 边界值分析表
| 参数 | 类型 | 范围/规则 | 上点 | 内点 | 离点 | 预期 |
|------|------|-----------|------|------|------|------|
| [P1] | int  | [1, 100]  | 1, 100 | 50 | 0, 101 | ... |
"""


# ═══════════════════════════════════════════════════════════════════════════════
# 4. 文档交付阶段 (Delivery) - 最终交付文档
# ═══════════════════════════════════════════════════════════════════════════════

ARTIFACT_DELIVERY_FINAL = """
# 测试设计文档 (Final)

## 文档概览
- **项目名称**: [Project Name]
- **版本**: V1.0
- **生成时间**: [Date]

## 1. 核心产出物汇总

### 1.1 需求画像
> *引用自需求分析文档*
- **核心功能数**: [N]
- **关键约束**: [List]

### 1.2 策略概览
> *引用自测试策略蓝图*
- **风险等级**: [High/Medium/Low]
- **重点覆盖**: [Areas]

### 1.3 用例统计
```mermaid
pie title 测试用例分布
    "P0 (核心)" : 20
    "P1 (重要)" : 50
    "P2 (一般)" : 30
```

## 2. 完整内容索引
> 以下引用各阶段详细产出...

### [附录 A] 需求分析详情
*(此处应包含完整需求文档内容)*

### [附录 B] 测试策略详情
*(此处应包含完整策略文档内容)*

### [附录 C] 测试用例详情
*(此处应包含完整用例集内容)*

## 3. 验收签字
- [ ] 产品经理确认
- [ ] 开发负责人确认
- [ ] 测试负责人确认
"""