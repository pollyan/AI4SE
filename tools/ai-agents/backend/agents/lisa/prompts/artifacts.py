"""
Lisa 工作流产出物模板定义

包含各阶段产出物的详细结构、格式要求和可视化示例。
"""

# ═══════════════════════════════════════════════════════════════════════════════
# 1. 需求澄清阶段 (Clarify) - 需求分析文档
# ═══════════════════════════════════════════════════════════════════════════════

ARTIFACT_CLARIFY_REQUIREMENTS = """
# 需求分析文档

## 1. 需求全景图
```mermaid
mindmap
  root((核心需求))
    要点1
      子要点 A
      子要点 B
    要点2
      子要点 C
    关键约束
      约束条件 1
```

## 2. 功能详细规格

| ID | 功能名称 | 描述 | 验收标准 | 优先级 |
|----|----------|------|----------|--------|
| F1 | [功能名] | [描述] | 1. [标准1]<br>2. [标准2] | P0 |
| F2 | ...      | ...  | ...      | ...    |

## 3. 业务流程图
```mermaid
graph TD
    A[开始] --> B{判断条件}
    B -- 是 --> C[流程分支1]
    B -- 否 --> D[流程分支2]
    C --> E[结束]
    D --> E
```

## 4. 非功能需求 (NFR)
- **性能**: [如：QPS > 1000, 响应时间 < 200ms]
- **安全**: [如：数据加密传输]
- **兼容性**: [如：支持 Chrome 80+]

## 5. 待确认事项 (TBD)
- [ ] [事项1]
- [ ] [事项2]
"""


# ═══════════════════════════════════════════════════════════════════════════════
# 2. 策略制定阶段 (Strategy) - 测试策略蓝图
# ═══════════════════════════════════════════════════════════════════════════════

ARTIFACT_STRATEGY_BLUEPRINT = """
# 测试策略蓝图

## 1. 风险分析 (FMEA)

```mermaid
quadrantChart
    title 风险矩阵
    x-axis 低发生的可能性 --> 高发生的可能性
    y-axis 低影响程度 --> 高影响程度
    quadrant-1 重点监控
    quadrant-2 核心测试
    quadrant-3 快速验证
    quadrant-4 常规回归
    "风险点A": [0.8, 0.9]
    "风险点B": [0.3, 0.8]
    "风险点C": [0.4, 0.2]
```

| 风险项 | 潜在失效模式 | 影响分析 | 缓解策略 |
|--------|--------------|----------|----------|
| R1     | [模式]       | [影响]   | [策略]   |

## 2. 测试分层策略

```mermaid
block-beta
columns 1
  block:e2e
    E2E_Tests["端到端测试 (UI/API) - 10%"]
  end
  block:integration
    Integration_Tests["集成测试 (Service/DB) - 30%"]
  end
  block:unit
    Unit_Tests["单元测试 (Function/Class) - 60%"]
  end
  style E2E_Tests fill:#f9f,stroke:#333,stroke-width:2px
  style Integration_Tests fill:#bbf,stroke:#333,stroke-width:2px
  style Unit_Tests fill:#cfc,stroke:#333,stroke-width:2px
```

## 3. 测试类型与工具
- **功能测试**: [工具/方法]
- **性能测试**: [工具/指标]
- **安全测试**: [工具/扫描]

## 4. 资源与环境规划
- **测试环境**: [Dev / Staging / Prod]
- **数据准备**: [造数脚本 / 生产脱敏]
- **人力投入**: [估算]
"""


# ═══════════════════════════════════════════════════════════════════════════════
# 3. 用例编写阶段 (Cases) - 测试用例集
# ═══════════════════════════════════════════════════════════════════════════════

ARTIFACT_CASES_SET = """
# 测试用例集

## 1. 测试用例架构
```mermaid
graph LR
    Root[测试用例集] --> Func[功能测试]
    Root --> NonFunc[非功能测试]
    
    Func --> Normal[正常场景]
    Func --> Abnormal[异常场景]
    
    Normal --> C1[用例1]
    Abnormal --> C2[用例2]
```

## 2. 核心场景列表

| ID | 场景描述 | 前置条件 | 关键步骤 | 预期结果 | 类型 |
|----|----------|----------|----------|----------|------|
| TC01 | [场景] | [条件] | 1. [步1]<br>2. [步2] | [结果] | 冒烟 |
| TC02 | ... | ... | ... | ... | 回归 |

## 3. 详细用例设计

### TC-001: [用例标题]
- **优先级**: P0
- **测试技术**: [如：边界值]
- **测试数据**:
  ```json
  {
    "key": "value"
  }
  ```
- **执行步骤**:
  1. 步骤描述 1
  2. 步骤描述 2
- **断言点**:
  - [ ] 检查点 A
  - [ ] 检查点 B

### TC-002: ...

## 4. 边界值分析表
| 参数 | 类型 | 范围/规则 | 上点 | 内点 | 离点 | 预期 |
|------|------|-----------|------|------|------|------|
| [P1] | int  | [1, 100]  | 1, 100 | 50 | 0, 101 | ... |
"""


# ═══════════════════════════════════════════════════════════════════════════════
# 4. 文档交付阶段 (Delivery) - 最终交付文档
# ═══════════════════════════════════════════════════════════════════════════════

ARTIFACT_DELIVERY_FINAL = """
# 测试设计文档 (Final)

## 文档概览
- **项目名称**: [Project Name]
- **版本**: V1.0
- **生成时间**: [Date]

## 1. 核心产出物汇总

### 1.1 需求画像
> *引用自需求分析文档*
- **核心功能数**: [N]
- **关键约束**: [List]

### 1.2 策略概览
> *引用自测试策略蓝图*
- **风险等级**: [High/Medium/Low]
- **重点覆盖**: [Areas]

### 1.3 用例统计
```mermaid
pie title 测试用例分布
    "P0 (核心)" : 20
    "P1 (重要)" : 50
    "P2 (一般)" : 30
```

## 2. 完整内容索引
> 以下引用各阶段详细产出...

### [附录 A] 需求分析详情
*(此处应包含完整需求文档内容)*

### [附录 B] 测试策略详情
*(此处应包含完整策略文档内容)*

### [附录 C] 测试用例详情
*(此处应包含完整用例集内容)*

## 3. 验收签字
- [ ] 产品经理确认
- [ ] 开发负责人确认
- [ ] 测试负责人确认
"""


# ═══════════════════════════════════════════════════════════════════════════════
# 骨架模板 (Skeleton) - 首次回复时用于展示文档结构框架
# ═══════════════════════════════════════════════════════════════════════════════

SKELETON_CLARIFY_REQUIREMENTS = """
# 需求分析文档

## 1. 需求全景图
> *[待生成 - 将根据对话内容生成需求思维导图]*

## 2. 功能详细规格
| ID | 功能名称 | 描述 | 验收标准 | 优先级 |
|----|----------|------|----------|--------|
| *待生成* | ... | ... | ... | ... |

## 3. 业务流程图
> *[待生成 - 将根据对话内容生成流程图]*

## 4. 非功能需求 (NFR)
- **性能**: *[待澄清]*
- **安全**: *[待澄清]*
- **兼容性**: *[待澄清]*

## 5. 待确认事项 (TBD)
- [ ] *根据对话过程逐步补充...*
"""

SKELETON_STRATEGY_BLUEPRINT = """
# 测试策略蓝图

## 1. 风险分析 (FMEA)
> *[待生成 - 将基于需求分析生成风险矩阵]*

| 风险项 | 潜在失效模式 | 影响分析 | 缓解策略 |
|--------|--------------|----------|----------|
| *待生成* | ... | ... | ... |

## 2. 测试分层策略
> *[待生成 - 将基于项目特点确定测试金字塔]*

## 3. 测试类型与工具
- **功能测试**: *[待确定]*
- **性能测试**: *[待确定]*
- **安全测试**: *[待确定]*

## 4. 资源与环境规划
- **测试环境**: *[待规划]*
- **数据准备**: *[待规划]*
- **人力投入**: *[待估算]*
"""

SKELETON_CASES_SET = """
# 测试用例集

## 1. 测试用例架构
> *[待生成 - 将基于测试策略生成用例结构图]*

## 2. 核心场景列表
| ID | 场景描述 | 前置条件 | 关键步骤 | 预期结果 | 类型 |
|----|----------|----------|----------|----------|------|
| *待生成* | ... | ... | ... | ... | ... |

## 3. 详细用例设计
> *[待生成 - 将逐个设计详细测试用例]*

## 4. 边界值分析表
| 参数 | 类型 | 范围/规则 | 上点 | 内点 | 离点 | 预期 |
|------|------|-----------|------|------|------|------|
| *待生成* | ... | ... | ... | ... | ... | ... |
"""

SKELETON_DELIVERY_FINAL = """
# 测试设计文档 (Final)

## 文档概览
- **项目名称**: *[待确定]*
- **版本**: V1.0
- **生成时间**: *[待生成]*

## 1. 核心产出物汇总
> *[待生成 - 将汇总前三阶段的核心产出]*

## 2. 完整内容索引
> *[待生成 - 将整合所有阶段文档]*

## 3. 验收签字
- [ ] 产品经理确认
- [ ] 开发负责人确认
- [ ] 测试负责人确认
"""
